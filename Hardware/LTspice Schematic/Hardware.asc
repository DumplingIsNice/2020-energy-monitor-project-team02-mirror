Version 4
SHEET 1 1744 1488
WIRE 128 -720 -16 -720
WIRE 320 -720 128 -720
WIRE 576 -720 320 -720
WIRE 320 -688 320 -720
WIRE 576 -672 576 -720
WIRE -16 -576 -16 -720
WIRE 320 -576 320 -608
WIRE 576 -512 576 -592
WIRE 704 -512 576 -512
WIRE 576 -464 576 -512
WIRE 320 -448 320 -496
WIRE 432 -448 320 -448
WIRE 448 -448 432 -448
WIRE 320 -432 320 -448
WIRE -16 -336 -16 -496
WIRE 144 -336 -16 -336
WIRE 320 -336 320 -352
WIRE 320 -336 144 -336
WIRE 576 -336 576 -384
WIRE 576 -336 320 -336
WIRE -912 -320 -928 -320
WIRE -800 -320 -832 -320
WIRE -1040 -256 -1072 -256
WIRE -928 -256 -928 -320
WIRE -928 -256 -960 -256
WIRE -928 -240 -928 -256
WIRE -896 -240 -928 -240
WIRE -800 -224 -800 -320
WIRE -800 -224 -832 -224
WIRE -768 -224 -800 -224
WIRE -896 -208 -928 -208
WIRE -1040 -192 -1072 -192
WIRE -928 -192 -928 -208
WIRE -928 -192 -960 -192
WIRE -928 -176 -928 -192
WIRE -928 -80 -928 -96
WIRE -32 96 -64 96
WIRE 96 96 48 96
WIRE 160 96 96 96
WIRE 368 96 336 96
WIRE 496 96 448 96
WIRE 560 96 496 96
WIRE 96 128 96 96
WIRE 496 128 496 96
WIRE 96 224 96 192
WIRE 496 224 496 192
WIRE -912 240 -928 240
WIRE -800 240 -832 240
WIRE -1040 304 -1072 304
WIRE -928 304 -928 240
WIRE -928 304 -960 304
WIRE -928 320 -928 304
WIRE -896 320 -928 320
WIRE -800 336 -800 240
WIRE -800 336 -832 336
WIRE -768 336 -800 336
WIRE -896 352 -928 352
WIRE -1040 368 -1072 368
WIRE -928 368 -928 352
WIRE -928 368 -960 368
WIRE -928 384 -928 368
WIRE -928 480 -928 464
WIRE 16 544 -64 544
WIRE 96 544 80 544
WIRE 208 544 176 544
WIRE 240 544 208 544
WIRE 320 544 240 544
WIRE 656 544 576 544
WIRE 928 544 656 544
WIRE 1056 544 928 544
WIRE 1344 560 1184 560
WIRE 1056 576 1056 544
WIRE 1184 640 1184 560
WIRE 1248 640 1184 640
WIRE 928 656 928 544
WIRE 1344 656 1344 560
WIRE 1344 656 1312 656
WIRE 1440 656 1344 656
WIRE 1056 672 1056 656
WIRE 1248 672 1056 672
WIRE 240 704 240 544
WIRE 656 704 656 544
WIRE 1056 704 1056 672
WIRE 1056 816 1056 784
WIRE -32 864 -64 864
WIRE 240 864 240 768
WIRE 240 864 -32 864
WIRE 448 864 448 640
WIRE 448 864 240 864
WIRE 656 864 656 768
WIRE 656 864 448 864
WIRE 928 864 928 736
WIRE 928 864 656 864
WIRE -32 880 -32 864
WIRE -1104 928 -1104 864
WIRE -1072 928 -1104 928
WIRE -912 944 -1008 944
WIRE -1072 960 -1104 960
FLAG -1152 -640 0
FLAG 144 -336 0
FLAG -1152 -720 5VDis
FLAG 128 -720 Vac
FLAG -32 880 0
FLAG -992 -640 0
FLAG -992 -720 1V4
FLAG -800 -640 0
FLAG -800 -720 VsensDis
FLAG 432 -448 Vis
FLAG -864 -192 0
FLAG -864 -256 5V
FLAG -1072 -192 Vis
FLAG -1072 -256 0
FLAG -768 -224 Vio
FLAG -928 -80 2V1
FLAG -864 368 0
FLAG -864 304 5V
FLAG -1072 304 0
FLAG -768 336 Vvo
FLAG -928 480 2V1
FLAG -64 544 Vac
FLAG 928 544 5V
FLAG 96 224 0
FLAG -64 96 Vvo
FLAG 160 96 Vvofilter
FLAG -544 -640 0
FLAG -544 -720 VopampDis
FLAG 208 544 Vin
FLAG 704 -512 Vvs
FLAG -1072 368 Vvs
FLAG 1440 656 2V1
FLAG 1056 816 0
FLAG 1280 688 0
FLAG 1280 624 5V
FLAG -1040 976 0
FLAG -1040 912 5V
FLAG -912 944 Vzero
FLAG -1104 960 Vvo
FLAG -1104 864 2V1
FLAG 496 224 0
FLAG 336 96 Vio
FLAG 560 96 Viofilter
SYMBOL voltage -1152 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage -16 -592 R0
WINDOW 0 24 96 Left 2
WINDOW 3 22 124 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply1
SYMATTR Value SINE(0 {Vp} {F})
SYMBOL PowerProducts/LT1085-5 448 544 R0
SYMATTR InstName Reg1
SYMBOL res 912 640 R0
SYMATTR InstName RL1
SYMATTR Value 100
SYMBOL res 192 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value 33
SYMBOL diode 16 560 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 224 704 R0
SYMATTR InstName Cin1
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=0.001
SYMBOL cap 640 704 R0
SYMATTR InstName Cout1
SYMATTR Value 47µ
SYMATTR SpiceLine Rser=0.001
SYMBOL voltage -992 -736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value .4V
SYMBOL voltage -800 -736 R0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 0.1 50)
SYMATTR Value2 AC .1 0
SYMBOL res 304 -592 R0
SYMATTR InstName Rload1
SYMATTR Value {RL}
SYMBOL ind 304 -704 R0
SYMATTR InstName Lload1
SYMATTR Value 40mH
SYMBOL res 304 -448 R0
SYMATTR InstName Rs1
SYMATTR Value 0.56
SYMBOL res 560 -688 R0
SYMATTR InstName Ra1
SYMATTR Value 56k
SYMBOL res 560 -480 R0
SYMATTR InstName Rb1
SYMATTR Value 3.3k
SYMBOL Opamps/opamp2 -864 -288 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL res -944 -208 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R9
SYMATTR Value {R1}
SYMBOL res -944 -272 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R10
SYMATTR Value {R1}
SYMBOL res -816 -336 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R11
SYMATTR Value {R2}
SYMBOL res -912 -80 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R12
SYMATTR Value {R2}
SYMBOL Opamps/opamp2 -864 272 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL res -944 352 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R13
SYMATTR Value {Rb}
SYMBOL res -944 288 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R14
SYMATTR Value {Ra}
SYMBOL res -816 224 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R15
SYMATTR Value {R23}
SYMBOL res -912 480 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R16
SYMATTR Value {R23}
SYMBOL res 64 80 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf1
SYMATTR Value 33k
SYMBOL cap 112 192 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf1
SYMATTR Value 4.8n
SYMBOL voltage -544 -736 R0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(2.1 1 50)
SYMATTR Value2 AC 1 0
SYMBOL res 1040 560 R0
SYMATTR InstName R17
SYMATTR Value 180k
SYMBOL res 1040 688 R0
SYMATTR InstName R18
SYMATTR Value 130k
SYMBOL Opamps/opamp2 1280 592 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U5
SYMATTR Value LM324
SYMBOL Opamps/opamp2 -1040 880 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U6
SYMATTR Value LM324
SYMBOL res 464 80 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf2
SYMATTR Value 33k
SYMBOL cap 512 192 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf2
SYMATTR Value 4.8n
TEXT 240 -960 Left 2 ;.ac dec 30 1 1Meg
TEXT 240 -1024 Left 2 !.lib LM324.lib
TEXT -1200 -840 Left 2 ;Power/Signal Sources
TEXT -1208 -1024 Left 3 ;*********************************************************\nELECTENG 209 - Hardware\nModels required provided as a starting point.\nLM324.lib must be in the same folder.\n*********************************************************
TEXT -88 -824 Left 2 ;AC Source, Load and Sensors
TEXT -1200 -568 Left 2 ;Notes: \n- These sources are used by more than 1 model and therefore\n   be mindful that changing these will effect most parts
TEXT -80 -256 Left 2 ;Notes: \n- Change Rs, Ra and Rb as per what you decided during lab 1\n- Rload is the variable resistor in your load which changes \n  from 5-105 ohms \n- Vsupply is between 12.6-15.4Vrms\n- Be mindful that changing values here will effect other parts
TEXT 272 -680 Right 2 ;Load \n(2.5VA-7.5VA)
TEXT 272 -392 Right 2 ;Current Sens \n(Pmax=198.2mW)
TEXT 520 -792 Left 2 ;Voltage Sens\n(Vvs(max)=21.79V)
TEXT 232 -1088 Left 2 ;Simulation Commands\n- Change these as needed
TEXT -1168 -416 Left 2 ;Current Sensor
TEXT -1168 8 Left 2 ;Notes: \n- Change resistor values as per your calculations for R1 and R2
TEXT -1168 144 Left 2 ;Voltage Sensor
TEXT -1168 568 Left 2 ;Notes: \n- Change resistor values as per your calculations for R1a, R1b and R2\n- R1a together with Thevenin of Ra & Rb should equal R1b
TEXT -112 424 Left 2 ;Power Supply (5V)
TEXT -96 0 Left 2 ;Filter Circuits (100kHz fbreak)
TEXT -112 304 Left 2 ;Notes: \n- Change capacitor and resistor values as per your calculations\n- Change the simulation command to simulate the frequency response
TEXT 240 -992 Left 2 !.tran 0 1 0 1m
TEXT 240 -928 Left 2 !.ic V(Vin)=8
TEXT -80 968 Left 2 ;Notes: \n- Change net label 5VDis to 5V to use the DC regulator - In this case \n  the 5V net attached to V1 needs to be set to 5VDis to disconnect it
TEXT -696 -368 Left 2 !.param R1=22k R2=56k
TEXT -696 216 Left 2 !.param Rb=1.5k Ra=4.7k R23=4.7k
TEXT -1184 736 Left 2 ;Zero-crossing Detector
TEXT 800 -720 Left 2 ;.param Vp=sqrt(2)*12.6 F=50 RL=16.65
TEXT 800 -624 Left 2 !.param Vp=sqrt(2)*15.4 F=50 RL=29
TEXT 800 -528 Left 2 ;.param Vp=sqrt(2)*15.4 F=50 RL=92.82
TEXT 808 -752 Left 2 ;7.5VA
TEXT 808 -648 Left 2 ;7.5VA
TEXT 808 -552 Left 2 ;2.5VA
RECTANGLE Normal 280 -700 408 -484 2
RECTANGLE Normal 280 -456 408 -344 2
RECTANGLE Normal 524 -748 660 -312 2
RECTANGLE Normal 200 -1104 636 -900 2
